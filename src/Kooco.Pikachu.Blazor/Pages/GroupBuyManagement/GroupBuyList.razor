@page "/GroupBuyManagement/GroupBuyList"
@using Volo.Abp.MultiTenancy

@using Volo.Abp.Application.Dtos
@using Kooco.Pikachu.GroupBuys

@using Kooco.Pikachu.Localization
@using Microsoft.Extensions.Localization
@using Volo.Abp
@using System.Text.Json;
@using System.ComponentModel


@inject IStringLocalizer<PikachuResource> L
@inject NavigationManager NavigationManager

<div class="col-12 row">
    <div class="col-6">
        <h3>Group Buy List</h3>
    </div>
    <div class="col-6" style="display: flex;flex-direction: row-reverse;">
       
      
        <Button Type="@ButtonType.Button" Style="margin-right:5px" class="btn btn-primary me-1" Clicked="CreateNewItem"  >@L["NewGroupBuy"]</Button>
    </div>
</div>
<div>
  <DataGrid TItem="GroupBuyDto"
                  Data="GroupBuyListItem"
                  ReadData="UpdateGroupBuyList"
                  TotalItems="Total"
                  ShowPager="true"
                  PageSize="_pageSize">
            <DataGridColumns>
             @*    <DataGridColumn TItem="GroupBuyDto" Caption="@L["Select"]">
                    <DisplayTemplate>
                        <InputCheckbox class="form-check-input" @bind-Value="@context.is"></InputCheckbox>
                    </DisplayTemplate>
                </DataGridColumn> *@
                <DataGridColumn TItem="GroupBuyDto"
                                Field="@nameof(GroupBuyDto.GroupBuyName)"
                                Caption="@L["GroupBuyName"]">
                </DataGridColumn>
     <DataGridColumn Width="150px"
                                TItem="GroupBuyDto"
                                Field="@nameof(GroupBuyDto.Id)"
                                Sortable="false"
                                Caption="@L["Actions"]">
                    <DisplayTemplate>
                        <Dropdown>
                            <DropdownToggle Color="Color.Primary">
                                @L["Actions"]
                            </DropdownToggle>
                            <DropdownMenu>
                              
                                    <DropdownItem Clicked="() => startEdit(context.Id)">
                                        @L["Edit"]
                                    </DropdownItem>
                              
                             
                            </DropdownMenu>
                        </Dropdown>
                    </DisplayTemplate>
                </DataGridColumn>
            </DataGridColumns>
        </DataGrid>
</div>

@code {
  

    public void CreateNewItem()
    {
        NavigationManager.NavigateTo("/GroupBuyManagement/GroupBuyList/New");
    }
    public void startEdit(Guid Id)
    {
         NavigationManager.NavigateTo("/GroupBuyManagement/GroupBuyList/Edit/"+Id);
    
    }
}

